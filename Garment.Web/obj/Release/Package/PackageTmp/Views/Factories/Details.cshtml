@model int
@{
    //ViewBag.Title = Model.Name + " - VITGarment";
    DateTime dDate = (DateTime)ViewBag.date;
    string date = dDate.ToString("dd/MM/yyyy");
    string predate = dDate.AddDays(-1).ToString("dd/MM/yyyy");
    string nextdate = dDate.AddDays(1).ToString("dd/MM/yyyy");
    int iscurrentdate = dDate.Date.CompareTo(DateTime.Now.Date);
}
<div class="row goal-manage" ng-app="garmentApp" ng-controller="goalscontroller">

    <div class="col-lg-3" style="background: white; padding-left: 0; padding-right: 0">
        <div class="main-box clearfix">
            @*<header class="main-box-header clearfix"></header>*@
            <div class="main-box-body clearfix">
                <img src="~/Content/assets/g1.jpg" width="400" height="400" />
            </div>
        </div>

        <div class="main-box small-xn-box">
            <div class="row">
                <div class="icon-box pull-left">
                    <a href="/Factories/Details?id={{factoryId}}&date={{predate}}" class="btn">
                        <i class="fa fa-chevron-left"></i>
                    </a>
                </div>
                <span class="datefactory" id="btndatepicker">
                    <input type="text" style="opacity:0; width: 0; position: absolute; left: calc(50% - 121px);" name="datepicker" id="datepicker" />
                    <a href="#">
                        <span class="fa fa-calendar"></span>
                    </a>
                    <b ng-bind-html="dayofweek"></b> {{date}}
                </span>
                <div class="icon-box pull-right" ng-show="{{iscurrentdate >= 0 ? false : true}}">
                    <a href="/Factories/Details?id={{factoryId}}&date={{nextdate}}" class="btn">
                        <i class="fa fa-chevron-right"></i>
                    </a>
                </div>
                
                
            </div>
            <div class="row name">
                <div class="icon-box pull-left">
                    <a href="/Factories/Details?id={{preFactoryId}}&date={{date}}" class="btn">
                        <i class="fa fa-chevron-left"></i>
                    </a>
                </div>
                <span class="name">{{factoryName}}</span>
                <div class="icon-box pull-right">
                    <a href="/Factories/Details?id={{nextFactoryId}}&date={{date}}" class="btn">
                        <i class="fa fa-chevron-right"></i>
                    </a>
                </div>
            </div>
            @*<span class="name">@Model.Name</span>*@
        </div>

        <div class="main-box clearfix">
            <header class="main-box-header clearfix"></header>
            <div class="main-box-body produce-box clearfix">
                <h1 class="headerquantity"><b>THỰC TẾ / MỤC TIÊU</b></h1>
                @*<h1 class="sub-header"></h1>*@
                <b class="value">{{TotalQuantityProduct}} / {{TotalQuantity}}</b>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6" style="padding-right:1.5px;">
                <div class="main-box clearfix">
                    <div class="main-box-body produce-box clearfix">
                        <div class="header"><b>TIẾN ĐỘ</b></div>
                        <div class="content">{{PercentProcess}}%</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" style="padding-left:1.5px;">
                <div class=" main-box clearfix">
                    <div class="main-box-body produce-box clearfix">
                        <div class="header"><b>THỜI GIAN CÒN LẠI</b></div>
                        <div class="content">{{goals[0].TimeLeft}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6" style="padding-right:1.5px;">
                <div class="main-box clearfix">
                    <div class="main-box-body produce-box clearfix">
                        <div class="header"><b>TỔ MAY</b></div>
                        <div class="content">{{TeamCount}}</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" style="padding-left:1.5px;">
                <div class="main-box clearfix">
                    <div class="main-box-body produce-box clearfix">
                        <div class="header"><b>CÔNG NHÂN</b></div>
                        <div class="content">{{TotalNoEmployeeAvailable}} / {{TotalNoEmployeeDefault}}</div>
                    </div>
                </div>
            </div>
        </div>

        @if (Request.IsAuthenticated)
        {
            <div class="main-box clearfix">
                <header class="main-box-header clearfix"></header>
                <div class="main-box-body clearfix">
                    <span class="info-left">
                        <a class="btn btn-primary" href="/Goals/FactoryCreate?factoryId=@Model" target="_blank" title="Màn hình nhập của xí nghiệp"><i class="fa fa-pencil"></i> Màn hình nhập xí nghiệp</a>
                    </span>
                </div>
            </div>
        }
    </div>


    <div class="col-lg-9">
        <div class="main-box clearfix">
            @*<header class="main-box-header clearfix"></header>*@
            <div class="main-box-body clearfix" ng-repeat="goal in goals">
                <div class="main-box small-tm-box">
                    <div class="clearfix">
                        <div class="col-md-3" style="padding-left: 0;">
                            <div class="main-box small-xn-box box-name">
                                <a href="/Teams/Details/{{goal.TeamId}}" target="_blank"><span class="name">{{goal.TeamName}}</span></a>
                            </div>
                            <div class="main-box">
                                <div class="main-box-body produce-box clearfix">
                                    <h2 class=""><b>SỐ CÔNG NHÂN</b></h2>
                                </div>
                                        <h1 class="text-center valueproduct"><b>{{goal.CurrentNoEmployee}} / {{goal.TotalEmployee}}</b></h1>
                                    
                                <div class="main-box-body produce-box clearfix">
                                    <h2 class=""><b>MÃ HÀNG</b></h2>
                                </div>

                                <ul class="list-unstyled">
                                    <li ng-repeat="productId in goal.CurrentProductIds" style="word-wrap: break-word;padding:5px">
                                        <h1 class="text-center valueproduct"><b>{{productId}}</b></h1>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="row goal-button">
                                <a class="btn btn-primary" href="/man-hinh/{{goal.TeamId}}" target="_blank" title="Màn hình hiển thị"><i class="fa fa-desktop"></i></a>
                                @if (Request.IsAuthenticated)
                                {
                                    <a class="btn btn-primary" href="/nhap?teamId={{goal.TeamId}}" target="_blank" title="Nhập liệu cho ngày hôm nay"><i class="fa fa-keyboard-o"></i></a>
                                }
                                @if (User.IsInRole("Admin"))
                                {
                                    <a class="btn btn-danger" href="/Goals/Admin?teamId={{goal.TeamId}}" target="_blank" title="Lịch sử sản xuất"><i class="fa fa-history"></i></a>
                                }
                            </div>
                        </div>
                        <div class="col-md-9 daily-goal-right">
                            <div class="tab-content">
                                <div id="team_{{goal.TeamId}}_chart_1" class="tab-pane active">
                                    <div class="row daily-col-5">
                                        <div class="row">
                                            @* 50-50 *@
                                            <table class="table table-responsive text-center borderless">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center goal-title" width="50%"><b>MỤC TIÊU CUỐI NGÀY</b></th>
                                                        <th class="text-center goal-title" width="50%"><b>% NĂNG SUẤT</b></th>

                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    <tr class="text-center">
                                                        <td>
                                                            <h1 class="goal-value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.TotalQuantity - goal.LastUpdatedProduceQuantity | abs}}</b></h1>
                                                        </td>
                                                        <td>
                                                            <h1 class="goal-value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.UpdatedData?((goal.LastUpdatedProduceQuantity * 100) / goal.TotalQuantity | number: 1) + '%' :'N/A'}}</b></h1>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                            @* nang suat va muc tieu do ve ben trai *@
                                            @*<table class="table table-responsive text-center borderless">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center goal-title" width="30%"><b>MỤC TIÊU CUỐI NGÀY</b></th>
                                                        <th class="text-center goal-title" width="30%"><b>% NĂNG SUẤT</b></th>
                                                        <th class="text-center goal-title"></th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    <tr class="text-center">
                                                        <td>
                                                            <h1 class="goal-value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.TotalQuantity - goal.LastUpdatedProduceQuantity | abs}}</b></h1>
                                                        </td>
                                                        <td>
                                                            <h1 class="goal-value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.UpdatedData?((goal.LastUpdatedProduceQuantity * 100) / goal.TotalQuantity | number: 1) + '%' :'N/A'}}</b></h1>
                                                        </td>

                                                        <td class="text-center" style="vertical-align:text-top">
                                                            
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>*@


                                            @*<div class="col-md-30 col-sm-3 box-1">
                                                <div class="main-box clearfix">
                                                    <div class="main-box-body clearfix">
                                                        

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-30 col-sm-3 box-1">
                                                <div class="main-box clearfix">
                                                    <div class="main-box-body clearfix">
                                                        <h1 class="goal-title"><b>MỤC TIÊU CUỐI NGÀY</b></h1>
                                                        <h1 class="goal-value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.TotalQuantity - goal.LastUpdatedProduceQuantity | abs}}</b></h1>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-25 col-sm-3 box-1">
                                                <div class="main-box clearfix">
                                                    <div class="main-box-body clearfix">
                                                        <h1 class="goal-title"><b>% NĂNG SUẤT </b></h1>
                                                        <h1 class="goal-value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.UpdatedData?((goal.LastUpdatedProduceQuantity * 100) / goal.TotalQuantity | number: 1) + '%' :'N/A'}}</b></h1>

                                                    </div>
                                                </div>
                                            </div>*@                                            
                                        </div>
                                        <div class="row">
                                            <table class="table table-responsive text-center borderless" ng-show="haveReasons(goal.LastReasons)">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center goal-title" width="25%">MÃ HÀNG</th>
                                                        <th class="text-center goal-title" width="25%">NGUYÊN NHÂN</th>
                                                        <th class="text-center goal-title" width="50%">GHI CHÚ</th>
                                                        <th class="text-center"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    <tr class="text-center" ng-repeat="preason in goal.LastReasons" ng-if="preason.Reasons.length > 0">
                                                        <td style="vertical-align:text-top" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><strong>{{preason.ProductId}}</strong></td>
                                                        <td style="vertical-align:text-top">
                                                            <ul class="list-unstyled" style="margin-bottom: 0;">
                                                                <li ng-repeat="reason in preason.Reasons">{{reason.Name}}</li>
                                                            </ul>
                                                        </td>

                                                        <td class="text-center" style="vertical-align:text-top">
                                                            <ul class="list-unstyled" style="margin-bottom: 0;">
                                                                <li ng-repeat="pcomment in goal.LastComments" ng-if="pcomment.Comment">{{pcomment.Comment}}</li>
                                                            </ul>

                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            @*<div class="col-md-30 col-sm-3 box-1" ng-show="haveReasons(goal.LastReasons)">
                                                <div class="main-box clearfix">
                                                    <div class="clearfix">
                                                        <h1 class="goal-title text-center"><b>MÃ HÀNG</b></h1>
                                                        <table class="table table-responsive text-left borderless">
                                                            <tbody>
                                                                <tr class="row" ng-repeat="preason in goal.LastReasons" ng-if="preason.Reasons.length > 0">
                                                                    <td style="width: 70px;text-align: center;vertical-align: top;" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><strong>{{preason.ProductId}}</strong></td>
                                                                   
                                                                </tr>
                                                            </tbody>
                                                        </table>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-30 col-sm-3 box-1" ng-show="haveReasons(goal.LastReasons)">
                                                <div class="main-box clearfix">
                                                    <div class="clearfix">
                                                        <h1 class="goal-title text-center"><b>NGUYÊN NHÂN</b></h1>
                                                        <table class="table table-responsive text-left borderless">
                                                            <tbody>
                                                                <tr class="row text-center" ng-repeat="preason in goal.LastReasons" ng-if="preason.Reasons.length > 0">

                                                                    <td>
                                                                        <ul class="list-unstyled" style="margin-bottom: 0;">
                                                                            <li ng-repeat="reason in preason.Reasons">{{reason.Name}}</li>
                                                                        </ul>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-25 col-sm-3 box-1" ng-show="haveComments(goal.LastComments)">
                                                <div class="main-box clearfix">
                                                    <div class="main-box-body clearfix">
                                                        <h1 class="goal-title text-center"><b>GHI CHÚ</b></h1>
                                                        <table class="table table-responsive text-left borderless">
                                                            <tbody>
                                                                <tr class="row text-center" ng-repeat="pcomment in goal.LastComments" ng-if="pcomment.Comment">

                                                                    <td>{{pcomment.Comment}}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>

                                                    </div>
                                                </div>
                                            </div>*@
                                        </div>
                                        
                                        
                                    </div>
                                        <div class="row">

                                        <div class="col-md-12">
                                            <div class="text-left" style="line-height: 44px; width: 80px; float:left"><strong>Sản phẩm</strong></div>
                                            <div style="width: calc(100% - 80px); float:left">
                                            <div class="timeline-header" id="pt-header-{{goal.TeamId}}">
                                                <div class="point" ng-if="goal.ChartModel.PCurrentTime < 100" data-toggle="tooltip" data-placement="top" title="~{{goal.ChartModel.PredictProduceQuantity}}" style="left: calc({{goal.ChartModel.PPredictProduceQuantity}}% - 8px)"></div>
                                                <div class="range-difference"></div>

                                            </div>
                                            <div id="pt-body-{{goal.TeamId}}" style="height: 6px; background:#eeeeee">
                                                <div ng-repeat="hour in goal.ChartModel.HourPieces | filter: {IsPass : false}" style="width:{{hour.PProduceQuantity}}%; position: relative; float:left;">
                                                    <div class="progress">
                                                        <div class="progress-bar progress-bar-info" style="width: {{hour.PStartQuantity}}%"></div>
                                                        <div class="progress-bar progress-bar-quantity" id="pq-{{goal.TeamId}}-{{hour.EndTime}}" data-pos="{{hour.PRealProduceQuantity}}" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'progress-bar-success':'progress-bar-danger'" style="width: {{100 - hour.PStartQuantity}}%"></div>
                                                    </div>
                                                    <div class="quantity-tooltip-text" ng-class="{'always-show': hour.RealProduceQuantity ==  goal.LastUpdatedProduceQuantity && hour.HasData}" id="tooltiptext_{{goal.TeamId}}_hour_{{hour.EndTime}}" data-pos="{{hour.PRealProduceQuantity}}" style="right: -15px">{{hour.RealProduceQuantity}}</div>
                                                    <div class="range-difference"></div>
                                                </div>
                                            </div>

                                        </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="text-left" style="line-height: 44px; width: 80px; float:left"><strong>Thời gian</strong></div>
                                            <div class="production-timeline" style="width: calc(100% - 80px); float:left">
                                            <div class="timeline-header">
                                                <div class="point" ng-if="goal.ChartModel.PCurrentTime < 100" data-toggle="tooltip" data-placement="bottom" title="{{goal.ChartModel.CurrentTime}}" style="left:calc({{goal.ChartModel.PCurrentTime}}% - 8px)"></div>
                                            </div>
                                            <div class="timeline-body">
                                                <div ng-repeat="hour in goal.ChartModel.HourPieces" class="hour-piece" style="width:{{100/goal.ChartModel.HourPieces.length}}%;">
                                                    <div class="progress" hour-tooltip hour="hour" pre-hour="goal.ChartModel.HourPieces[$index - 1]" team-id="goal.TeamId">
                                                        <div class="progress-bar progress-bar-info" style="width: {{hour.PStartTime}}%"></div>
                                                        <div class="progress-bar" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'progress-bar-success':'progress-bar-danger'" ng-if="!hour.IsPass" style="width:{{100-hour.PStartTime}}%"></div>
                                                    </div>

                                                    <div class="end-point" ng-class="hour.IsPass?'': !hour.HasData ? (goal.LastUpdatedProduceQuantity < goal.LastUpdatedQuantity ? 'red-border': 'green-border') : (goal.LastUpdatedProduceQuantity < goal.LastUpdatedQuantity ? 'red-bg': 'green-bg')" data-tooltiptextid="tooltiptext_{{goal.TeamId}}_hour_{{hour.EndTime}}" hour="hour" team-id="goal.TeamId" id="quantity_tooltip_{{goal.TeamId}}_{{hour.EndTime}}" quantity-tooltip></div>

                                                    <div ng-if="$first" class="start-time">{{hour.StartTime}}</div>
                                                    <div class="end-time">{{hour.EndTime}}</div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    </div>

                                    <div class="row daily-col-5">
                                        <div class="col-md-15 col-sm-3 box-1">
                                            <div class="main-box infographic-box">
                                                <span class="headline"><b>MỤC TIÊU NGÀY</b></span>
                                                <span class="value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.TotalQuantity | number:0}}</b></span>
                                            </div>
                                        </div>
                                        <div class="col-md-15 col-sm-3 box-1">
                                            <div class="main-box infographic-box">
                                                <span class="headline"><b>MỤC TIÊU GIỜ</b></span>
                                                <span class="value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.TotalQuantity/goal.TotalHour| number:0}}</b></span>
                                            </div>
                                        </div>
                                        <div class="col-md-15 col-sm-3 box-1">
                                            <div class="main-box infographic-box">
                                                <span class="headline"><b>MỤC TIÊU LÚC {{goal.LastUpdatedHour}}</b></span>
                                                <span class="value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.LastUpdatedQuantity}}</b></span>
                                            </div>
                                        </div>
                                        <div class="col-md-15 col-sm-3 box-2">
                                            <div class="main-box infographic-box">
                                                <span class="headline"><b>THỰC TẾ LÚC {{goal.LastUpdatedHour}}</b></span>
                                                <span class="value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.UpdatedData?goal.LastUpdatedProduceQuantity:'N/A'}}</b></span>
                                            </div>
                                        </div>
                                        <div class="col-md-15 col-sm-3 box-3">
                                            <div class="main-box infographic-box">
                                                <span class="headline"><b>LỆCH</b></span>
                                                <span class="value" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.UpdatedData ? (goal.LastUpdatedProduceQuantity - goal.LastUpdatedQuantity|abs) : 'N/A'}}</b></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="team_{{goal.TeamId}}_chart_2" class="tab-pane">
                                    <div id="team_{{goal.TeamId}}_hourchart" class="hourchart"></div>
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th><span></span></th>
                                                <th class="text-center" ng-repeat="goaldetail in goal.GoalDetails">
                                                    <span><b>{{goaldetail.EndCountTimeString}}</b></span>
                                                </th>
                                                <th class="text-center">Tổng</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="text-center"><b>MỤC TIÊU</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails"><b>{{goaldetail.Quantity| number: 0}}</b></td>
                                                <td class="text-center"><b>{{goal.LastUpdatedQuantity| number: 0}}</b></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center"><b>THỰC TẾ</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails"><b ng-if="!goaldetail.IsPass">{{goaldetail.ProduceQuantity!=0 ? (goaldetail.ProduceQuantity| number: 0) : 'N/A'}}</b></td>
                                                <td class="text-center"><b>{{goal.LastUpdatedProduceQuantity| number: 0}}</b></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center"><b>LỆCH</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails"><span ng-class="goaldetail.ProduceQuantity >= goaldetail.Quantity? 'green': 'red'" ng-if="!goaldetail.IsPass"><b>{{goaldetail.ProduceQuantity && goaldetail.Quantity ? (goaldetail.ProduceQuantity - goaldetail.Quantity| number: 0): 'N/A'}}</b></span></td>
                                                <td class="text-center" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.LastUpdatedProduceQuantity - goal.LastUpdatedQuantity | abs| number:0}}</b></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center"><b>NGUYÊN NHÂN</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails">
                                                    <span ng-if="!goaldetail.IsPass && haveReasons(goaldetail.ProductDetails)" class="red" data-container="body" data-toggle="popover" data-placement="bottom"  data-trigger="hover"
                                                          data-content="{{getReasons(goaldetail)}}" data-html="true"
                                                          data-original-title="" title="">
                                                        <i class="fa fa-warning fa-lg"></i>
                                                    </span>
                                                </td>
                                                <td class="text-center"></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center"><b>GHI CHÚ</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails">
                                                    <span ng-if="!goaldetail.IsPass && haveComments(goaldetail.ProductDetails)" class="red" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover"
                                                          data-content="{{getComments(goaldetail)}}" data-html="true"
                                                          data-original-title="" title="">
                                                        <i class="fa fa-warning fa-lg"></i>
                                                    </span>
                                                </td>
                                                <td class="text-center"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div id="team_{{goal.TeamId}}_chart_3" class="tab-pane">
                                    <div id="team_{{goal.TeamId}}_empchart" class="empchart"></div>
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th><span></span></th>
                                                <th class="text-center" ng-repeat="goaldetail in goal.GoalDetails">
                                                    <span><b>{{goaldetail.EndCountTimeString}}</b></span>
                                                </th>
                                                @*<th class="text-center">Tổng</th>*@
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="text-center"><b>Số công nhân</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails"><b>{{goaldetail.NoEmployee| number: 0}}</b></td>
                                                @*<td class="text-center"><b>{{goal.LastUpdatedQuantity| number: 0}}</b></td>*@
                                            </tr>
                                            @*<tr>
                                                <td class="text-center"><b>THỰC TẾ</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails"><b ng-if="!goaldetail.IsPass">{{goaldetail.ProduceQuantity!=0 ? (goaldetail.ProduceQuantity| number: 0) : 'N/A'}}</b></td>
                                                <td class="text-center"><b>{{goal.LastUpdatedProduceQuantity| number: 0}}</b></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center"><b>LỆCH</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails"><span ng-class="goaldetail.ProduceQuantity >= goaldetail.Quantity? 'green': 'red'" ng-if="!goaldetail.IsPass"><b>{{goaldetail.ProduceQuantity && goaldetail.Quantity ? (goaldetail.ProduceQuantity - goaldetail.Quantity| number: 0): 'N/A'}}</b></span></td>
                                                <td class="text-center" ng-class="goal.LastUpdatedProduceQuantity >= goal.LastUpdatedQuantity?'green':'red'"><b>{{goal.LastUpdatedProduceQuantity - goal.LastUpdatedQuantity | abs| number:0}}</b></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center"><b>NGUYÊN NHÂN</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails">
                                                    <span ng-if="!goaldetail.IsPass && haveReasons(goaldetail.ProductDetails)" class="red" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover"
                                                          data-content="{{getReasons(goaldetail)}}" data-html="true"
                                                          data-original-title="" title="">
                                                        <i class="fa fa-warning fa-lg"></i>
                                                    </span>
                                                </td>
                                                <td class="text-center"></td>
                                            </tr>*@
                                            @*<tr>
                                                <td class="text-center"><b>GHI CHÚ</b></td>
                                                <td class="text-center" ng-repeat="goaldetail in goal.GoalDetails">
                                                    <span ng-if="!goaldetail.IsPass && haveComments(goaldetail.ProductDetails)" class="red" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover"
                                                          data-content="{{getComments(goaldetail)}}" data-html="true"
                                                          data-original-title="" title="">
                                                        <i class="fa fa-warning fa-lg"></i>
                                                    </span>
                                                </td>
                                                <td class="text-center"></td>
                                            </tr>*@
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="btn-group pull-right">
                                <ul class="nav nav-tabs">
                                    <li class="active">
                                        <a class="btn" data-toggle="tab" href="#team_{{goal.TeamId}}_chart_1">
                                            Tổng quan
                                        </a>
                                    </li>
                                    <li>
                                        <a class="btn chart2-btn" data-toggle="tab" href="#team_{{goal.TeamId}}_chart_2">
                                            Chi tiết giờ
                                        </a>
                                    </li>
                                    <li>
                                        <a class="btn chart2-btn" data-toggle="tab" href="#team_{{goal.TeamId}}_chart_3">
                                            Công nhân
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section Styles
{
    <link href="~/Content/views/factories.details.css" rel="stylesheet" />
        }
@section Scripts
{
    <script src="~/Scripts/angular.min.js"></script>
    <script src="~/Scripts/highcharts/highcharts.js"></script>
    <script>
        var factoryId = '@Model';
        var date = '@date';
        var predate = '@predate';
        var nextdate = '@nextdate';
        var iscurrentdate = '@iscurrentdate';
    </script>
    <script src="~/Scripts/views/factories.details.js"></script>
}